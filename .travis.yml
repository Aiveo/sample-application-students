git:
  depth: 5

stages:
  - "Sonar"

jobs:
  include:
    - stage: "Sonar"
      language: java
      before_script:
        - cd sample-application-backend
      script:
        - echo "Maven sonar"
        - ls
        - pwd
        - mvn clean verify org.jacoco:jacoco-maven-plugin:prepare-agent sonar:sonar" -Dsonar.projectKey=sample-application-students

cache:
  directories:
    - "$HOME/.m2/repository"
    - "$HOME/.npm"

services:
  - docker

addons:
  sonarcloud:
    organization: "aiveo"
    token: "$SONARCLOUD_TOKEN"